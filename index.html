<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Drupal in 2020</title>
  <meta name="author" content="Larry Garfield">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="palantirnet-theme/css/styles.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'palantirnet-theme/css/print/pdf.css' : 'palantirnet-theme/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->

  <style type="text/css">

    dl dt {
      text-align: left;
    }

    dl dd {
      margin-left: 2em;
      text-align: left;
    }

    .struck {
      text-decoration: line-through;
    }

    .reveal p + p {
      margin-top: 1em;
    }

    li.bigdeal {
      font-size: 150%;
      color: Red;
      font-style: italic;
      text-shadow: 3px 3px 10px #990000;
    }

    span.bigdeal {
      font-size: 150%;
      color: Red;
      font-style: italic;
      text-shadow: 3px 3px 10px #990000;
      text-transform: uppercase;
      transition: 500ms;
    }

    p.bigdeal {
      font-size: 200%;
      color: Red;
      font-style: italic;
      text-shadow: 3px 3px 10px #990000;
    }

  </style>

  <script src="palantirnet-theme/js/classer.js"></script>

  <!--<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>-->

</head>
<!-- Change body class to "dark" if you prefer a dark theme, or "light" if you'd rather have a light theme-->
<body class="light">
<div class="reveal">
  <!-- Any section element inside of this container is displayed as a slide -->
  <div class="slides">

    <section>
      <h1>Drupal in 2020</h1>
      <p>
        <small>Presented by <a href="http://www.garfieldtech.com/">Larry Garfield</a> (<a href="http://twitter.com/Crell">@Crell</a>)</small>
      </p>
    </section>
    <section class="l-2up">
      <h2><a href="http://twitter.com/Crell">@Crell</a></h2>
      <div>
        <img src="assets/larry-olaf-hug.jpg" alt="Larry implements Huggable" style="width: 350px; margin: 0" />
      </div>
      <div>
        <ul style="text-wrap: none">
          <li>Senior Architect, <a href="http://www.palantir.net/">Palantir.net</a></li>
          <li style="margin-top: 1em;">Drupal 8 Web Services Lead</li>
          <li style="margin-top: 1em;">Drupal Representative, <a href="http://www.php-fig.org/">PHP-FIG</a></li>
          <li style="margin-top: 1em;">Advisor, Drupal Association</li>
          <li style="margin-top: 1em;"><code>implements Huggable</code></li>
        </ul>
      </div>
    </section>
    <section>
      <section>
        <img src="assets/drupal-8-logo.svg" width="600px" />
        <aside class="notes">
          <ul>
            <li>Going to be great</li>
            <li>Be proud</li>
            <li>Applause for audience who worked on it</li>
            <li>Nothing should be taken as criticism of team</li>
          </ul>
        </aside>
      </section>
      <section>
        <h2>Let's never do that again</h2>
      </section>
      <section>
        <h2>We spent 4 years playing catch up</h2>
      </section>
      <section>
        <p class="bigtext">Wordpress had a <a href="http://wp-api.org/">REST API</a> years ago</p>
        <p class="fragment bigtext">Joomla was responsive by default in 20xx.</p>
      </section>
      <section>
        <blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">I&#39;d hate to sound like a hater, but the &#39;breakthru&#39; <a href="https://twitter.com/hashtag/Drupal8?src=hash">#Drupal8</a> features seem like what <a href="https://twitter.com/hashtag/EPiServer?src=hash">#EPiServer</a> 7 had 3 yrs ago <a href="http://t.co/Vi7oGzmvcp">pic.twitter.com/Vi7oGzmvcp</a></p>&mdash; Arild Henrichsen (@ahenrichsen) <a href="https://twitter.com/ahenrichsen/status/620640287220756481">July 13, 2015</a></blockquote>
        <img src="assets/drupal-8-feature-list.png" style="width: 700px" alt="Drupal 8 feature list" data-credit="https://twitter.com/ahenrichsen/status/620640287220756481/photo/1" />
      </section>
      <section>
        <p class="bigtext">The market is moving faster than we are</p>
        <p class="fragment bigtext">Technology is moving even faster.</p>
      </section>
      <section>
        <h2>Since Drupal 8 was started...</h2>
        <ul>
          <li class="fragment">Composer/Packagist</li>
          <li class="fragment">PHP-FIG</li>
          <li class="fragment">Symfony2</li>
          <li class="fragment">React PHP</li>
          <li class="fragment">Flexbox</li>
          <li class="fragment">PHP 5.4<span class="fragment">, PHP 5.5</span><span class="fragment">, PHP 5.6</span><span class="fragment">, PHP 7?</span></li>
          <li class="fragment">IE 9<span class="fragment">, IE 10</span><span class="fragment">, IE 11</span><span class="fragment">, Edge</span></li>
        </ul>
        <aside class="notes">
          <ul>
            <li>MS released 4 browsers. WAT?</li>
          </ul>
        </aside>
      </section>
      <section>
        <p class="bigtext">We need to get out in front</p>
      </section>
      <section>
        <img src="assets/drupal-8-release-schedule.jpg" alt="Semver releases will help" data-credit="https://www.drupal.org/core/dev-cycle" />
        <p class="fragment">Only part of the solution</p>
      </section>
      <section>
        <h2>Where will we need to be in<br />5 years?</h2>
        <aside class="notes">
          <ul>
            <li>What will the market want?</li>
            <li>What will the tech state of the art be?</li>
            <li>Move that way now, incrementally</li>
          </ul>
        </aside>
      </section>
      <section>
        <img src="assets/saruman-palantir.jpg" style="width: 100%;" alt="I tried to consult a crystal ball..." data-credit="https://thepatriotperspective.wordpress.com/2012/07/29/why-the-pentagon-should-be-suspicious-of-palantir/" />
        <aside class="notes">
          <ul>
            <li>Tried to consult a crystal ball</li>
          </ul>
        </aside>
      </section>
      <section>
        <img src="assets/pippin-palantir.jpg" style="width: 100%;" alt="But that didn't work out so well" data-credit="http://www.elevenwarriors.com/forum/ohio-state-recruiting/2015/07/56554/brendan-ferns" />
        <aside class="notes">
          <ul>
            <li>Didn't work out so well</li>
          </ul>
        </aside>
      </section>
    </section>
    <section>
      <section>
        <h2>Let's look at trends</h2>
      </section>
      <section>
        <h2>Push-web</h2>
        <blockquote>I believe that for the web to reach its full potential, it
          will go through a massive re-architecture and re-platforming in the next
          decade... The future of the web is "push-based", meaning the web will
          be coming to us.</blockquote>
        <p>&mdash;Dries Buytaert, <a href="http://buytaert.net/the-big-reverse-of-the-web">The Big Reverse of the Web</a></p>
        <aside class="notes">
          <ul>
            <li>Push-based, meaning server takes action.</li>
            <li>Queues are insufficient.</li>
          </ul>
        </aside>
      </section>
      <section>
        <h2>Saving the Open Web</h2>
        <blockquote>For the Open Web to win, we first must build websites and
          applications that exceed the user experience of Facebook, Apple, Google,
          etc. Second, we need to take back control of our data.</blockquote>
        <blockquote class="fragment">To deliver the best user experience, you want “loosely-coupled
          architectures with a highly integrated user experience”</blockquote>
        <p class="fragment">&mdash;Dries Buytaert, <a href="http://buytaert.net/winning-back-the-open-web">Winning Back the Open Web</a></p>
      </section>
      <section>
        <h2>Decoupled CMS</h2>
        <p class="fragment bigtext">Separate "editorial" from "presentational" install</p>
        <ul>
          <li class="fragment">Static generator</li>
          <li class="fragment">View-only application</li>
          <li class="fragment">Twin installs (weird!)</li>
          <li class="fragment">Live Content server / presentation server</li>
        </ul>
        <aside class="notes">
          <ul>
            <li>Not JS framework "headless"</li>
            <li>Keep getting clients asking for separate content staging server</li>
            <li>Live server has active connection to presentation server, high traffic</li>
          </ul>
        </aside>
      </section>
      <section>
        <img src="assets/decoupled-cms-schedule.png" alt="Decoupled CMSes let you evolve the front and back end separately" data-credit="https://twitter.com/ToddRoss/status/495245469543849984" />
        <p><a href="https://twitter.com/ToddRoss/status/495245469543849984">Todd Ross Nienkerk: "Future of the CMS"</a></p>
      </section>
      <section>
        <blockquote>HTML, CSS, user interaction, analytics, social media integration,
          public user interaction, etc. are <em>content delivery concerns</em>.  Content
          modeling, workflow, editing, indexing, etc. are <em>content management
          concerns</em>.</blockquote>
        <p>&mdash;Deane Barker, <a href="http://gadgetopia.com/post/7206">Decoupled Content Management 101</a></p>
      </section>
      <section class="l-2up">
        <h2>Headless (JS apps)</h2>
        <div>
          <img src="assets/headless-drupal-horseman.jpg" alt="Headless Drupal" data-credit="https://pantheon.io/blog/headless-websites-whats-big-deal" />
        </div>
        <div>
          <ul>
            <li class="fragment">High-traffic API</li>
            <li class="fragment">... The same API as live content server?</li>
            <li class="fragment">Micro-transactions</li>
          </ul>
        </div>
      </section>
      <section>
        <p class="bigtext">Drupal based on micro-services?</p>
        <h2 class="fragment" style="margin-top: 1em;">Drupal <em>as</em> a microservice?</h2>
        <h2 class="fragment" style="margin-top: 1em;">Drupal as microservice<em>s</em>?</h2>
      </section>
      <section class="l-3up">
        <h2>The Real-Time Web</h2>
        <div class="fragment">
          <p class="bigtext">EventSource/SSE</p>
        </div>
        <div class="fragment">
          <img src="assets/websocket-logo.png" alt="Websockets" data-credit="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5" />
        </div>
        <div class="fragment">
          <img src="assets/http2-logo.png" alt="HTTP 2" data-credit="https://twitter.com/http_2" />
        </div>
        <p style="margin-top: 1em;" class="fragment bigtext">Persistent connections with server-push</p>
      </section>
      <section>
        <p class="bigtext">Our current way of running Drupal is<br />woefully inadequate</p>
      </section>
    </section>
    <section>
      <section>
        <h2>The problem is CGI</h2>
      </section>
      <section>
        <h2><a href="https://en.wikipedia.org/wiki/Common_Gateway_Interface">Common Gateway Interface</a></h2>
        <ul>
          <li class="fragment">NCSA, 1993</li>
          <li class="fragment">"specification for calling command line executables"</li>
          <li class="fragment">Pass environment variables to script</li>
          <li class="fragment"><code>$_SERVER</code></li>
        </ul>
        <aside class="notes">
          <ul>
            <li>Older than many people in this room</li>
            <li>Why is $_SERVER so weird?  CGI.</li>
          </ul>
        </aside>
      </section>
      <section>
        <p class="bigtext">Shared nothing design can't keep up</p>
        <ul>
          <li class="fragment">OS overhead</li>
          <li class="fragment">No connection persistence</li>
          <li class="fragment">Wasteful application boot</li>
        </ul>
        <p class="fragment">How much of Drupal 8 is designed around<br />compensating for shared-nothing?</p>
        <aside class="notes">
          <ul>
            <li>Process management, hand-off, even with "FastCGI"</li>
            <li>Persistence: No daemons, no push</li>
            <li>How much do we stress over container and boot performance?</li>
          </ul>
        </aside>
      </section>
      <section>
        <h2>It's time to leave CGI behind</h2>
      </section>
      <section>
        <img src="assets/say-what-baby.jpg" alt="Wait, WHAT?" data-credit="http://aleteia.org/2015/05/21/married-sex-is-the-best-sex-if-you-do-it-right/" />
      </section>
    </section>
    <section>
      <h2>Non-CGI PHP</h2>
      <p class="bigtext fragment">Yes, for reals</p>
    </section>
    <section>
      <section>
        <h2>React PHP</h2>
      </section>
      <section>

      </section>
    </section>
    <section>
      <section>
        <h2>Icicle</h2>
      </section>
      <section>

      </section>
    </section>
    <section>
      <section>
        <h2>HHVM</h2>
      </section>
      <section>

      </section>
    </section>
    <section>
      <section>
        <h2>Forking PHP!</h2>
      </section>
      <section>

      </section>
    </section>
    <section>
      <section>
        <h2>Who will win?</h2>
      </section>
      <section>
        <img src="assets/8-ball-ask-later" alt="Ask again later; I can't predict the future" data-credit="" />
      </section>
      <section>
        <p class="bigtext">CGI won't go away entirely</p>
        <p class="fragment bigtext">We just need to work without it</p>
        <p class="fragment bigtext">Yes, we will need both!</p>
        <aside class="notes">
          <ul>
            <li>How do we make a CGI Drupal and an async Drupal?</li>
            <li>How do we make a monolithic Drupal and a decoupled Drupal?</li>
          </ul>
        </aside>
      </section>
      <section>
        <h2>What we need</h2>
        <p class="fragment bigtext">Different configurations of common<br /><span id="drupal-components">Drupal components</span></p>
        <span class="fragment" data-classer="drupal-components" data-classer-class="bigdeal"></span>
        <aside class="notes">
          <ul>
            <li>A clue!</li>
          </ul>
        </aside>
      </section>
      <section>
        <p class="bigtext">We need components that can run in any mode!</p>
      </section>
      <section>
        <h2>Resuable components</h2>
        <ul>
          <li class="fragment">Stateless <span class="fragment">(Not one single global!)</span></li>
          <li class="fragment">No request(stack) dependencies</li>
          <li class="fragment">Container-free</li>
          <li class="fragment">Isolated IO</li>
          <li class="fragment">As little custom code as possible</li>
        </ul>
        <p class="fragment">Dare I say, pure functional? <span class="fragment">(I dare)</span></p>
        <aside class="notes">
          <ul>
            <li>Stateless: No state makes it reentrant; value objects</li>
            <li>Request: Context tracking a nightmare</li>
            <li>Container: Probably want different container</li>
            <li>IO: Probably have to rewrite it for each mode</li>
            <li>No custom: Lot of work, encourages separation</li>
          </ul>
        </aside>
      </section>
      <section>
        <p class="bigtext">The same clean-code standards we've been pushing for years!</p>
        <p class="fragment bigtext">This is why</p>
      </section>
      <section>
        <h2>Challenges</h2>
        <ul>
          <li class="fragment">Entity API: <span class="fragment">too many statics, service dependencies</span></li>
          <li class="fragment">Render API: <span class="fragment">Render context?</span></li>
          <li class="fragment">ContainerAware: <span class="fragment">Coupled to one container</span></li>
          <li class="fragment">RequestStack: <span class="fragment">Subrequests, not async</span></li>
        </ul>
        <aside class="notes">
          <ul>
            <li>Render context could go either way if async</li>
          </ul>
        </aside>
      </section>
      <section>
        <p class="bigtext">Thread-safe code can easily be used in CGI mode, but not vice versa.</p>
        <p class="fragment bigtext">It's also far more testable.</p>
      </section>
      <section>
        <p class="bigtext">This is within sight...</p>
        <div class="fragment">
          <p class="bigtext">... because Drupal 8</p>
          <img src="assets/drupal-8-logo.svg" alt="Drupal 8 got us closer" />
          <aside class="notes">
            <ul>
              <li>Drupal 8 is closer to this vision than Drupal 7 is to Drupal 8</li>
              <li>As long as we don't slide backward</li>
            </ul>
          </aside>
        </div>
      </section>
    </section>
    <section>
      <section>
        <p class="bigtext"><q>But what if you're wrong?</q></p>
        <p>&mdash;Everyone in this room</p>
      </section>
      <section>
        <h2>Left with...</h2>
        <ul>
          <li class="fragment">Highly decoupled...</li>
          <li class="fragment">Highly testable...</li>
          <li class="fragment">Resuable...</li>
          <li class="fragment">Sharable...</li>
        </ul>
        <p class="fragment bigtext">Components</p>
      </section>
      <section>
        <h1>Win!</h1>
        <img src="assets/win" alt="We still win" data-credit="" />
      </section>
    </section>



    <div style="display: none">
      D8: Gonna be great
      D8: We're playing catch up
      Get out in front of changes, prepare for them now
      What will the market want/need/look like in 2020?
      What will the tech be in 2020?

      Dries: Push web
      Decoupled CMSes (need source for growth)
      Headless (Often many requests)
      Real time web (websockets, SSE)

      None of those work well now:
      - Push on queue?  Now you're doing async badly
      - Decoupled: Need many requests, diff caching. Really want a lighter bootstrap
      - Real time: Needs persistent connection, daemon
      => The problem is CGI. Need to move away from CGI.

      PHP w/out CGI???
      - PHP 5.3: daemons actually work, RAM-wise
      - Have sockets
      - React PHP, async, fast, websockets
      - Icicle.io, generators
      - Process forking?

      We will need this in 2020. But which? All or nothing? No idea?

      How do we prepare for what we don't know?
      Stateless code.
      Even less of our own code
      Isolated IO (to replace)
      No container-aware (need different container).
      .. The same good clean code we've been after for a long time.

    </div>

    <section>
      <section>
        <h2>Tools</h2>
        <ul>
          <li><a href="http://www.reactphp.org/">React PHP</a></li>
          <li><a href="http://icicle.io">Icicle</a></li>
          <li><a href="">HHVM</a></li>
        </ul>
      </section>
      <section>
        <h2>Further reading</h2>
        <ul>
          <li><a href=""></a>PHP process control</li>
          <li><a href="http://www.sitepoint.com/an-introduction-into-event-loops-in-php/">An Introduction to Event Loops</a></li>
          <li><a href=""></a>Articles from phone</li>
          <li><a href=""></a></li>
          <li><a href=""></a></li>
        </ul>
      </section>
    </section>

    <section id="final-slide">
      <h2>Larry Garfield</h2>
      <p>Senior Architect, <a href="http://www.palantir.net/">Palantir.net</a></p>
      <p>Making the Web a Better Place</p>
      <p>Keep tabs on our work at <a href="http://twitter.com/Palantir">@Palantir</a></p>
      <p>Want to hear about <a href="http://eepurl.com/ws6uj">what we're doing</a>?</p>
    </section>
  </div>

  <footer class="footer">
    <a class="logo-wrapper" href="https://www.palantir.net/" title="Link to Palantir.net's website">
      <div class="logo">
        <p>Palantir.net</p>
      </div>
    </a>
  </footer>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

  // Full list of configuration options available at:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    transition: 'slide', // none/fade/slide/convex/concave/zoom

    // Optional reveal.js plugins
    dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true },
      { src: 'plugin/notes/notes.js', async: true }
    ]
  });

</script>

</body>
</html>
